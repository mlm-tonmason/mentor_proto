syntax = "proto3";

package mentor.client.call;

option go_package = "github.com/mlm-tonmason/mentor-proto/gen/go/mentor/client/call";

import "mentor/types/call.proto";

// Сервис звонков.
service CallService {
    // Начать звонок.
    rpc StartCall(StartCallRequest) returns (StartCallResponse);

    // Завершить звонок.
    rpc EndCall(EndCallRequest) returns (EndCallResponse);
}

message StartCallRequest {
    string bot_id = 1;
    string thread_id = 2; // Привязка к чату
    string voice_id = 3;  // Опционально: переопределение голоса
}

message StartCallResponse {
    mentor.types.CallSession session = 1;
    string streaming_url = 2; // URL для WebRTC/Streaming подключения
}

message EndCallRequest {
    string session_id = 1;
}

message EndCallResponse {
    mentor.types.CallTranscript transcript = 1;
}
