syntax = "proto3";

package mentor.client.memory;

import "mentor/types/memory.proto";
import "mentor/types/bot.proto";

// Сервис управления памятью и настройками Бота (RAG).
service MemoryService {
  // Получить "факты", которые бот знает о пользователе.
  rpc GetMemory(mentor.types.bot.Bot.Id) returns (mentor.types.memory.BotUserMemory);

  // Получить настройки "Ключ-Значение".
  rpc GetKVMemory(mentor.types.bot.Bot.Id) returns (mentor.types.memory.BotUserKVMemory);

  // Сохранить произвольные данные "Ключ-Значение".
  // (Простое хранилище: что передали, то и сохранили).
  rpc UpdateKVMemory(UpdateKVMemoryRequest) returns (mentor.types.memory.BotUserKVMemory);
}

message UpdateKVMemoryRequest {
  uint32 bot_id = 1;
  map<string, string> items = 2; 
}
