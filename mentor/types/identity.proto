syntax = "proto3";

package mentor.types.identity;

import "mentor/types/common.proto";
import "google/protobuf/timestamp.proto";

// –û–±–æ–≥–∞—â–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–æ—Å—Ç–∞–≤–Ω–æ–π –æ—Ç–≤–µ—Ç API).
message UserProfile {
  // –î–∞–Ω–Ω—ã–µ –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã (Real-time sync).
  PublicUserProfile public_profile = 1;

  // –Ø–∑—ã–∫ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å –±–æ—Ç–∞–º–∏ (en, ru).
  Locale interface_language = 2;

  // –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω—ã–π –∫–æ—à–µ–ª–µ–∫.
  repeated mentor.types.Money balances = 3;
}

// –ü—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
message PublicUserProfile {
  uint32 distributor_id = 1;    // ID –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—è (u32).
  string distributor_login = 2; // –õ–æ–≥–∏–Ω –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—è.
  string referral_link = 3;     // –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Å–∞–º–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

  // Telegram ID.
  int64 telegram_id = 4; 
  string telegram_username = 5; // "durov"

  string first_name = 6;
  string last_name = 7;
  string avatar_url = 8; // –ê–≤–∞—Ç–∞—Ä–∫–∞.
  
  google.protobuf.Timestamp created_at = 9;
}

// –õ–æ–∫–∞–ª—å - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —è–∑—ã–∫.
message Locale {
  message Id {
      string code = 1; // "ru", "en"
  }
  
  string code = 1; // "ru", "en"
  string display_name = 2; // "–†—É—Å—Å–∫–∏–π"
}

// –í–∞–ª—é—Ç–∞ (–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫).
message Currency {
  message Id {
    string code = 1; // "TON"
  }
  
  string code = 1;         // TON, USDT
  string display_name = 2; // "Toncoin"
  string symbol = 3;       // $, üíé
  int32 decimals = 4;      // –ö–æ–ª-–≤–æ –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π (9 –¥–ª—è TON)
}

// –í–∞–ª—é—Ç–Ω–∞—è –ø–∞—Ä–∞ (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è).
// –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –ø–∞—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –æ–±–º–µ–Ω–∞/–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.
message ExchangePair {
  message Id {
      string pair_id = 1; // "TON/USD"
  }

  // –°–ø–∏—Å–æ–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤–∞–ª—é—Ç–Ω—ã—Ö –ø–∞—Ä.
  // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É.
  message List {
      repeated string pair_ids = 1;
  }

  string pair_id = 1; // "TON/USD"

  string base_currency_code = 2;  // "TON" (–¢–æ–≤–∞—Ä)
  string quote_currency_code = 3; // "USD" (–¶–µ–Ω–∞)
}

// –¢–µ–∫—É—â–∏–π –∫—É—Ä—Å –æ–±–º–µ–Ω–∞ (Real-time –¥–∞–Ω–Ω—ã–µ).
message ExchangeRate {
  string pair_id = 1; // "TON/USD"
  
  string buy_rate = 2;  // –ö—É—Ä—Å –ø–æ–∫—É–ø–∫–∏ (—Å–∫–æ–ª—å–∫–æ quote –ø–ª–∞—Ç–∏–º –∑–∞ 1 base) "5.50"
  string sell_rate = 3; // –ö—É—Ä—Å –ø—Ä–æ–¥–∞–∂–∏ (—Å–∫–æ–ª—å–∫–æ quote –ø–æ–ª—É—á–∞–µ–º –∑–∞ 1 base) "5.45"
  
  google.protobuf.Timestamp updated_at = 4;
}

// –°–∏—Å—Ç–µ–º–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.
// –°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
message SystemConfig {
  repeated Locale locales = 1;
  
  // –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞–ª—é—Ç—ã (–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫).
  repeated Currency currencies = 2;
  
  // –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞–ª—é—Ç–Ω—ã–µ –ø–∞—Ä—ã.
  repeated ExchangePair exchange_pairs = 3;
  
  // –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã (Snapshot –Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–ø—Ä–æ—Å–∞).
  repeated ExchangeRate exchange_rates = 4;
}
