syntax = "proto3";

package mentor.types.identity;

import "google/protobuf/timestamp.proto";
import "mentor/types/common.proto";

// --- –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è (Enums) ---

// –¢–µ–º–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
enum Theme {
  THEME_UNSPECIFIED = 0; // –ù–µ —É–∫–∞–∑–∞–Ω–∞
  THEME_LIGHT = 1;       // –°–≤–µ—Ç–ª–∞—è
  THEME_DARK = 2;        // –¢–µ–º–Ω–∞—è
  THEME_SYSTEM = 3;      // –ö–∞–∫ –≤ —Å–∏—Å—Ç–µ–º–µ
}

// --- –ú–æ–¥–µ–ª–∏ ---

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∞–∫–∫–∞—É–Ω—Ç Mentor).
message User {
  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (UUID —Å—Ç—Ä–æ–∫–∞).
  string id = 1;

  // –í–Ω–µ—à–Ω–∏–π ID (SSO, –Ω–∞–ø—Ä–∏–º–µ—Ä Telegram User ID).
  string network_user_id = 9;

  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
  UserSettings settings = 2;

  google.protobuf.Timestamp created_at = 3;
  google.protobuf.Timestamp updated_at = 4;
  google.protobuf.Timestamp last_active_at = 5; // –ü–æ–ª–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ Retention (–¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ —Å–æ–≤–µ—Ç—É Spec Architect)
}

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
message UserSettings {
  // –Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (en, ru).
  string interface_language = 1;

  // –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è.
  Theme theme = 2;

  // –¢—è–∂–µ–ª—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ (true = –≤–∫–ª—é—á–µ–Ω—ã).
  bool animations_enabled = 3;
}

// –û–±–æ–≥–∞—â–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–æ—Å—Ç–∞–≤–Ω–æ–π –æ—Ç–≤–µ—Ç API).
message UserProfile {
  // –õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ë–î Mentor).
  User user = 1;

  // –î–∞–Ω–Ω—ã–µ –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã (Real-time sync).
  NetworkData network_data = 2;
}

// –î–∞–Ω–Ω—ã–µ –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–µ—Ç–∏ (SPOF: Single Point of Truth in Network).
message NetworkData {
  string username = 1;
  string avatar_url = 2; // NFT –∞–≤–∞—Ç–∞—Ä–∫–∞

  // –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω—ã–π –∫–æ—à–µ–ª–µ–∫.
  repeated BalanceItem balances = 3;

  // –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ.
  string deposit_url = 4;
}

// –≠–ª–µ–º–µ–Ω—Ç –±–∞–ª–∞–Ω—Å–∞.
message BalanceItem {
  // –°—É–º–º–∞ ("10.500").
  string amount = 1;

  // ID –≤–∞–ª—é—Ç—ã.
  uint32 currency_id = 2;
}

// –í–∞–ª—é—Ç–∞ (–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫).
message Currency {
  uint32 id = 1;
  string code = 2;         // TON, USDT, POINTS
  string display_name = 3; // –ù–∞–ø—Ä–∏–º–µ—Ä, "Toncoin"
  string symbol = 4;       // $, üíé
  int32 decimals = 5;      // –ö–æ–ª-–≤–æ –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π (9 –¥–ª—è TON)
}

// –í–∞–ª—é—Ç–Ω–∞—è –ø–∞—Ä–∞ (–ö—É—Ä—Å –æ–±–º–µ–Ω–∞).
message ExchangePair {
  string base_currency = 1;  // USD (—Ç–æ–≤–∞—Ä)
  string quote_currency = 2; // TON (–æ–ø–ª–∞—Ç–∞)
  string rate = 3;           // "0.5" (—Å–∫–æ–ª—å–∫–æ quote –∑–∞ 1 base)
}

// –°–∏—Å—Ç–µ–º–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.
message SystemConfig {
  repeated Locale supported_locales = 1;
}

// –õ–æ–∫–∞–ª—å.
message Locale {
  string code = 1;         // 'ru'
  string display_name = 2; // '–†—É—Å—Å–∫–∏–π'
}
