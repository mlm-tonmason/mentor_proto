syntax = "proto3";

package mentor.types.memory;

import "google/protobuf/timestamp.proto";
import "google/protobuf/struct.proto";

// Модели Памяти (Контекст пользователя).

// Структурированная память Бота о Пользователе (Факты).
message BotUserMemory {
  uint32 distributor_id = 1; // ID Авторизованного пользователя (Плательщик/Дистрибьютор).
  uint32 bot_id = 2;  // ID Бота

  // Структурированные данные (например, { "name": "John", "hobbies": ["web3"] }).
  // Заполняются LLM в фоне.
  google.protobuf.Struct data = 3;

  google.protobuf.Timestamp updated_at = 4;
}

// Плоская память "Ключ-Значение" (Настройки/Флаги).
// Инжектится в System Prompt: `USER_THEME=Dark`.
message BotUserKVMemory {
  uint32 distributor_id = 1; // ID Авторизованного пользователя.
  uint32 bot_id = 2;

  // Карта строковых значений.
  map<string, string> items = 3; 
}
