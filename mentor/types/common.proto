syntax = "proto3";

package mentor.types;

import "google/protobuf/timestamp.proto";

// Деньги (денежная сумма).
// Используется string для точного представления decimal.
message Money {
  // Уникальный идентификатор валюты (из справочника Currency).
  string currency_code = 1;

  // Сумма в строковом формате (например, "10.50", "0.00000123").
  string amount = 2;
}

// Диапазон дат для фильтрации.
message DateRange {
  // Начальная дата (включительно).
  google.protobuf.Timestamp from = 1;

  // Конечная дата (включительно).
  google.protobuf.Timestamp to = 2;
}

// Курсор для пагинации (ID-based).
message Cursor {
  // Направление сортировки.
  enum SortOrder {
    SORT_ORDER_UNSPECIFIED = 0; // Не указано
    SORT_ORDER_ASC = 1;         // По возрастанию (Older first / Forward)
    SORT_ORDER_DESC = 2;        // По убыванию (Newer first / Backward)
  }

  // Последний известный идентификатор (курсор).
  // Если не указан (null/0), выборка начинается с начала или с конца списка 
  // в зависимости от направления сортировки (sort_order).
  optional uint32 last_id = 1;
  
  // Максимальное количество записей в ответе (Limit).
  // Если не указано, сервер использует значение по умолчанию (например, 20 или 50).
  optional uint32 limit = 2;
  
  // Направление выборки (по умолчанию ASC/FORWARD).
  SortOrder sort_order = 3;
}

// Статистика рейтинга.
// Используется для Ботов, Авторов и других оцениваемых сущностей.
message Rating {
  message RateRequest {
    uint32 entity_id = 1; // ID оцениваемой сущности.
    uint32 score = 2;     // Оценка от 1 до 5.
  }

  uint32 entity_id = 1; // ID оцениваемой сущности.
  
  // Моя оценка (личный голос). 
  // 0 или null — я не голосовал.
  uint32 my_score = 2; 

  // Распределение оценок: звезда (1-5) -> количество голосов.
  // Фронтенд сам считает среднее и общее кол-во на основе этих данных.
  map<uint32, uint32> distribution = 3; 
}
